<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Text</title>
    <!-- Use Tailwind CSS for a clean, mobile-first design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply a custom font and dark theme with a subtle emoji background */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #e0e7ff;
            min-height: 100vh;
            position: relative;
        }

        /* More prominent, repeating emoji background pattern with subtle animation */
        .emoji-background::before {
            content: '';
            position: fixed; /* Use fixed to keep the background in place while scrolling */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='50' font-size='15' fill='%23333' opacity='0.2'%3E%F0%9F%98%8D%3C/text%3E%3Ctext x='50' y='50' font-size='15' fill='%23333' opacity='0.2'%3E%F0%9F%A4%A9%3C/text%3E%3Ctext x='25' y='75' font-size='15' fill='%23333' opacity='0.2'%3E%F0%9F%8C%88%3C/text%3E%3Ctext x='75' y='25' font-size='15' fill='%23333' opacity='0.2'%3E%F0%9F%8C%9F%3C/text%3E%3C/svg%3E");
            background-size: 50px 50px;
            background-repeat: repeat;
            animation: pulse-glow 15s infinite ease-in-out;
            z-index: -1; /* Push background behind the content */
        }

        @keyframes pulse-glow {
            0% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.05); }
            100% { opacity: 0.1; transform: scale(1); }
        }

        .container {
            max-width: 90%;
            margin: 2rem auto;
            animation: fadeIn 1s ease-in-out;
            position: relative;
            z-index: 10;
            background-color: rgba(26, 32, 44, 0.7); /* More transparent background */
            backdrop-filter: blur(8px); /* Frosted glass effect */
            border-radius: 1.5rem; /* Rounded corners for the container */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
        }
        /* Custom styles for textareas to match the dark theme */
        textarea {
            background-color: #1e1e1e;
            border-color: #4a5568;
            resize: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        textarea:focus {
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.5), 0 4px 20px rgba(0, 0, 0, 0.3);
            border-color: #6366f1;
        }
        button {
            transition: all 0.2s ease-in-out;
            transform: scale(1);
        }
        button:hover {
            transform: scale(1.05);
        }
        .btn-encode {
            background-color: #6366f1;
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }
        .btn-decode {
            background-color: #4b5563;
            color: #d1d5db;
            box-shadow: 0 4px 15px rgba(75, 85, 99, 0.2);
        }
        .btn-convert {
            background: linear-gradient(45deg, #10b981, #34d399);
            color: #ffffff;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        .btn-copy {
            background-color: #4b5563;
            color: #d1d5db;
            box-shadow: 0 4px 15px rgba(75, 85, 99, 0.2);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Styles for the Update Pop-up */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .popup-content {
            background-color: #1a202c;
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            color: #e0e7ff; /* Ensure text color is visible */
        }
        .popup-overlay.show .popup-content {
            transform: translateY(0);
        }
        .popup-content ul {
            list-style: none; /* Remove default bullet points */
            padding: 0;
            margin-top: 1rem;
            text-align: left; /* Align list items to the left */
        }
        .popup-content ul li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }
        .popup-content ul li::before {
            content: 'âœ¨'; /* Custom emoji bullet point */
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 emoji-background">
    <div class="container p-10 rounded-3xl shadow-2xl space-y-6 max-w-3xl w-full">
        <h1 class="text-5xl font-extrabold text-center text-white mb-8 tracking-wide">Emoji Text</h1>

        <!-- Mode Selection Buttons -->
        <div class="flex justify-center space-x-4 mb-6">
            <button id="encodeBtn" class="px-8 py-4 rounded-xl font-bold text-lg btn-encode">
                Encode
            </button>
            <button id="decodeBtn" class="px-8 py-4 rounded-xl font-bold text-lg btn-decode">
                Decode
            </button>
        </div>

        <!-- Input Box -->
        <div>
            <label for="inputText" class="block text-gray-300 text-sm font-medium mb-2">Input Text</label>
            <textarea id="inputText" rows="6" placeholder="Type your message here..." class="w-full p-5 rounded-xl border-2 border-gray-600 focus:border-indigo-400"></textarea>
        </div>

        <!-- Convert Button -->
        <div class="flex justify-center my-6">
            <button id="convertBtn" class="w-full max-w-sm px-10 py-4 rounded-xl font-bold text-2xl btn-convert transform hover:scale-105">
                Convert
            </button>
        </div>

        <!-- Output Box -->
        <div>
            <label for="outputText" class="block text-gray-300 text-sm font-medium mb-2">Output</label>
            <div class="relative">
                <textarea id="outputText" rows="6" readonly class="w-full p-5 rounded-xl border-2 border-gray-600"></textarea>
                <button id="copyBtn" class="absolute bottom-4 right-4 p-2 rounded-xl text-sm font-bold btn-copy transform hover:scale-105">
                    Copy
                </button>
            </div>
        </div>

        <!-- Version Tag in the bottom right corner, within the container -->
        <div class="absolute bottom-4 right-4 text-sm text-gray-400 opacity-75">
            Beta 1.1
        </div>
    </div>

    <!-- Update Pop-up -->
    <div id="updatePopup" class="popup-overlay">
        <div class="popup-content">
            <h2 class="text-3xl font-bold text-white mb-4">Update Beta 1.1</h2>
            <ul class="text-gray-300 text-lg">
                <li>Emoji-themed design with subtle animations.</li>
                <li>Perfectly working encoding and decoding for all text, including punctuation.</li>
                <li>Copy button for output.</li>
                <li>This new update popup!</li>
            </ul>
            <button id="closePopupBtn" class="px-6 py-3 rounded-lg font-semibold text-lg bg-blue-600 text-white shadow-md hover:bg-blue-700 transition-colors duration-200 mt-6">
                Got It!
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Define the current app version
            const APP_VERSION = '1.1'; // Increment this for new updates

            // Check for new updates
            const lastVisitedVersion = localStorage.getItem('emojiAppVersion');
            const updatePopup = document.getElementById('updatePopup');
            const closePopupBtn = document.getElementById('closePopupBtn');

            if (lastVisitedVersion !== APP_VERSION) {
                updatePopup.classList.add('show');
                localStorage.setItem('emojiAppVersion', APP_VERSION);
            }

            closePopupBtn.addEventListener('click', () => {
                updatePopup.classList.remove('show');
            });

            // Define the emoji mapping for each letter of the alphabet.
            // Each letter has exactly 5 unique emojis.
            const emojiMap = {
                'a': ['ðŸŽ', 'âœˆï¸', 'âš“ï¸', 'ðŸ‘½', 'ðŸš‘'],
                'b': ['ðŸ»', 'ðŸ¼', 'ðŸš²', 'ðŸŽˆ', 'ðŸ“š'],
                'c': ['ðŸ±', 'ðŸš—', 'ðŸ“¸', 'ðŸŒµ', 'ðŸª'],
                'd': ['ðŸ¶', 'ðŸ¬', 'ðŸŽ²', 'ðŸ¥', 'ðŸ‰'],
                'e': ['ðŸ˜', 'ðŸ¥š', 'ðŸ‘ï¸', 'ðŸŒ', 'âœ‰ï¸'],
                'f': ['ðŸ¸', 'ðŸ”¥', 'ðŸŒ¸', 'ðŸš©', 'ðŸ˜‚'],
                'g': ['ðŸ‘»', 'ðŸ‡', 'ðŸŽ', 'ðŸ¦’', 'ðŸ'],
                'h': ['â¤ï¸', 'ðŸ”¨', 'ðŸ ', 'ðŸ”', 'ðŸ¦”'],
                'i': ['ðŸ¦', 'ðŸï¸', 'â™¾ï¸', 'ðŸ†”', 'ðŸ›'],
                'j': ['ðŸ‘¨â€âš–ï¸', 'ðŸ‘–', 'ðŸ¤¹', 'ðŸŽƒ', 'ðŸ‡¯ðŸ‡µ'],
                'k': ['ðŸ”‘', 'ðŸ¥', 'ðŸª', 'ðŸ¦˜', 'ðŸ’‹'],
                'l': ['ðŸ¦', 'ðŸƒ', 'ðŸ’»', 'ðŸ”¦', 'ðŸ’¡'],
                'm': ['ðŸŒ•', 'â›°ï¸', 'ðŸ­', 'ðŸ„', 'ðŸ’°'],
                'n': ['ðŸ¥·', 'ðŸœ', 'ðŸ’…', 'ðŸ“°', 'ðŸ¦©'],
                'o': ['ðŸ¦‰', 'ðŸ™', 'ðŸŠ', 'ðŸ‘¹', 'â›Žï¸'],
                'p': ['ðŸ·', 'ðŸ•', 'ðŸ', 'ðŸ§', 'ðŸ¼'],
                'q': ['â“', 'ðŸ‘¸', 'ðŸ¦š', 'ðŸ¤«', 'ðŸ«“'],
                'r': ['ðŸ°', 'ðŸš€', 'ðŸ’', 'ðŸŒ¹', 'ðŸ¤–'],
                's': ['â­', 'â˜€ï¸', 'ðŸ', 'âš½', 'ðŸ¿ï¸'],
                't': ['ðŸ¯', 'ðŸŒ³', 'ðŸŒ®', 'ðŸŽŸï¸', 'ðŸ“ž'],
                'u': ['â˜‚ï¸', 'ðŸ¦„', 'ðŸ™ƒ', 'ðŸ‡ºðŸ‡¸', 'ðŸ›¸'],
                'v': ['ðŸŒ‹', 'ðŸŽ»', 'ðŸŽ®', 'ðŸ¦…', 'âœŒï¸'],
                'w': ['ðŸ³', 'ðŸ‰', 'ðŸŒŠ', 'âŒš', 'ðŸ§°'],
                'x': ['âŽ', 'âŒ', 'ðŸš·', 'ðŸ†–', 'âœ–ï¸'],
                'y': ['ðŸ ', 'â›µ', 'ðŸª€', 'ðŸ¥±', 'ðŸ’›'],
                'z': ['ðŸ¦“', 'ðŸ¤ª', 'ðŸ§Ÿ', 'ðŸ¤', 'ðŸ’¤']
            };

            // This is the reverse map for decoding. It's built dynamically.
            const letterMap = {};
            for (const letter in emojiMap) {
                emojiMap[letter].forEach(emoji => {
                    letterMap[emoji] = letter;
                });
            }

            const inputText = document.getElementById('inputText');
            const outputText = document.getElementById('outputText');
            const encodeBtn = document.getElementById('encodeBtn');
            const decodeBtn = document.getElementById('decodeBtn');
            const convertBtn = document.getElementById('convertBtn');
            const copyBtn = document.getElementById('copyBtn');
            let mode = 'encode'; // Initial mode
            let originalCopyBtnText = 'Copy';

            // Function to set the active mode
            const setMode = (newMode) => {
                mode = newMode;
                if (mode === 'encode') {
                    encodeBtn.classList.remove('btn-decode');
                    encodeBtn.classList.add('btn-encode');
                    decodeBtn.classList.remove('btn-encode');
                    decodeBtn.classList.add('btn-decode');
                } else {
                    decodeBtn.classList.remove('btn-decode');
                    decodeBtn.classList.add('btn-encode');
                    encodeBtn.classList.remove('btn-encode');
                    encodeBtn.classList.add('btn-decode');
                }
                // Clear the output when the mode changes
                outputText.value = '';
            };

            // Encoding function: turns text into a random emoji from the corresponding letter's array
            const encode = () => {
                const input = inputText.value;
                let output = '';
                for (const char of input) {
                    const lowerChar = char.toLowerCase();
                    if (emojiMap[lowerChar]) {
                        // Pick a random emoji from the array for that letter
                        const emojis = emojiMap[lowerChar];
                        const randomIndex = Math.floor(Math.random() * emojis.length);
                        output += emojis[randomIndex] + ' '; // Add a space for readability
                    } else {
                        // Keep non-alphabetic characters as they are, separated by a space
                        output += char + ' ';
                    }
                }
                outputText.value = output.trim(); // Trim trailing space
            };

            // Decoding function: turns emojis back into their corresponding letters
            const decode = () => {
                // Split the input by one or more spaces to separate the emojis
                const input = inputText.value.trim().split(/\s+/);
                let output = '';
                for (const token of input) {
                    if (letterMap[token]) {
                        // If the token is a known emoji, decode it to its letter
                        output += letterMap[token];
                    } else {
                        // If it's not a known emoji, it must be punctuation, a number, or a space.
                        // Append it directly to the output without an extra space.
                        output += token;
                    }
                }
                outputText.value = output;
            };

            // Event listener for the copy button
            copyBtn.addEventListener('click', () => {
                outputText.select();
                try {
                    // document.execCommand('copy') is more reliable in this environment
                    const successful = document.execCommand('copy');
                    const msg = successful ? 'Copied!' : 'Failed to copy';
                    console.log(msg);
                    copyBtn.textContent = 'Copied!';
                    setTimeout(() => {
                        copyBtn.textContent = originalCopyBtnText;
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                    copyBtn.textContent = 'Error!';
                    setTimeout(() => {
                        copyBtn.textContent = originalCopyBtnText;
                    }, 2000);
                }
            });

            // Event listeners for the main buttons
            encodeBtn.addEventListener('click', () => {
                setMode('encode');
                encode();
            });
            decodeBtn.addEventListener('click', () => {
                setMode('decode');
                decode();
            });
            convertBtn.addEventListener('click', () => {
                if (mode === 'encode') {
                    encode();
                } else {
                    decode();
                }
            });

            // Initial call to set the default mode
            setMode('encode');
        });
    </script>
</body>
</html>
